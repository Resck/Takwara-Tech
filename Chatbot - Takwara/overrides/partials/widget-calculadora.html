<div id="calculator-fixed-box">
    <h2 id="calculator-title">Calculadora de Domos</h2>
    <form id="calculator-form-widget">
        <div class="form-group-widget">
            <label for="diameter-widget">Diâmetro (m):</label>
            <input type="number" id="diameter-input-widget" step="0.01" required>
        </div>
        <div class="form-group-widget">
            <label for="base-solid-widget">Sólido Base:</label>
            <select id="base-solid-input-widget"></select>
        </div>
        <div class="form-group-widget">
            <label for="frequency-widget">Frequência/Variante:</label>
            <select id="frequency-input-widget"></select>
        </div>
        <div class="form-group-widget">
            <label for="truncation-widget">Tipo de Esfera:</label>
            <select id="truncation-input-widget"></select>
        </div>
        <div class="form-group-widget">
            <label for="pole-diameter-widget">Diâmetro das Varas (cm):</label>
            <input type="number" id="pole-diameter-input-widget" step="0.01" value="5">
            <small id="pole-diameter-note" style="display: none; color: gray; font-size: 0.8em; margin-top: 5px;">Se não preenchido, o cálculo de PU e Cabo de Aço será N/A ou padrão.</small>
        </div>
        <button type="submit" id="calculate-button">Calcular</button>
    </form>
    <div id="results-container-widget" style="margin-top: 1rem;">
        <h4>resultados:</h4>
        <div id="results-table-widget"></div>
        <div id="material-costs-widget"></div>
        <div id="diagram-section-widget" style="display: none; text-align: center; margin-top: 15px;">
            <img id="dome-diagram-img" src="" alt="Diagrama da Cúpula" style="max-width: 100%; height: auto; border-radius: 8px;">
            <button id="view-diagram-button" style="margin-top: 10px; padding: 8px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Ver Diagrama Grande</button>
        </div>
        <button id="download-results-button" style="margin-top: 15px; padding: 10px 20px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; display: none;">Baixar Resultados (.md)</button>
    </div>
    <p id="error-message-widget" style="color: red;"></p>
    <p id="footer-notes" style="font-size: 0.8em; color: gray; margin-top: 15px; display: none;"></p>
</div>

<div id="diagram-modal" style="display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.8);">
    <span class="close-button" id="close-diagram-modal" style="position: absolute; right: 25px; top: 15px; color: #f1f1f1; font-size: 40px; font-weight: bold; cursor: pointer;">&times;</span>
    <img class="modal-content" id="modal-diagram-img" style="margin: auto; display: block; width: 80%; max-width: 700px; border-radius: 8px;">
</div>
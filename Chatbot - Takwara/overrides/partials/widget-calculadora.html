{# Chatbot - Takwara/overrides/partials/widget-calculadora.html #}
{# Conteúdo HTML para a UI da Calculadora DENTRO da Tool Box #}

<div id="calculator-fixed-box"> {# Este ID pode ser renomeado para algo como "calculator-widget-content" para evitar confusão com "fixed" #}
    {# Garanta que o título H2 está AQUI se quiser que ele apareça no conteúdo da aba (já está correto na captura) #}
    <h2 id="calculator-title">Calculadora de Domos</h2>

    {# Opcional: Se a descrição "Interface da Calculadora de Domos" não está em widget-tools, adicione aqui #}
    {# <p>Interface da Calculadora de Domos.</p> #}

    <form id="calculator-form-widget">
        <div class="form-group-widget">
            <label for="diameter-widget">Diâmetro (m):</label>
            <input type="number" id="diameter-input-widget" step="0.01" required>
        </div>
        <div class="form-group-widget">
            <label for="base-solid-widget">Sólido Base:</label>
            <select id="base-solid-input-widget"></select>
        </div>
        <div class="form-group-widget">
            <label for="frequency-widget">Frequência/Variante:</label>
            <select id="frequency-input-widget"></select>
        </div>
        <div class="form-group-widget">
            <label for="truncation-widget">Tipo de Esfera:</label>
            <select id="truncation-input-widget"></select>
        </div>
        <div class="form-group-widget">
            <label for="pole-diameter-widget">Diâmetro das Varas (cm):</label>
            <input type="number" id="pole-diameter-input-widget" step="0.01" value="5">
            <small id="pole-diameter-note" style="display: none; color: gray; font-size: 0.8em; margin-top: 5px;">Se não preenchido, o cálculo de PU e Cabo de Aço será N/A ou padrão.</small>
        </div>
        <button type="submit" id="calculate-button">Calcular</button>
    </form>

    <div id="results-container-widget" style="margin-top: 1rem;">
        <h4>resultados:</h4>
        <div id="results-table-widget"></div>
        <div id="material-costs-widget"></div>
        {# Removida a seção de diagrama (#diagram-section-widget) #}

        {# Garanta que o botão de download ESTÁ aqui com o ID correto #}
        <button type="button" id="download-results-button" style="margin-top: 15px; padding: 10px 20px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; display: none;">Baixar Resultados (.md)</button>

        {# Garanta que os elementos de mensagem de erro e notas ESTÃO aqui com os IDs corretos #}
        <p id="error-message-widget" style="color: red;"></p>
        <p id="footer-notes" style="font-size: 0.8em; color: gray; margin-top: 15px; display: none;"></p>
    </div>

    {# REMOVA COMPLETAMENTE TODO O HTML DO MODAL QUE ESTIVER ABAIXO DESTA LINHA #}
    {# Procure por <div id="diagram-modal" ...> e remova tudo até o </div> correspondente #}

</div>